<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Task-1</title>
  </head>
  <body>
    <script>


        //Джон

        var tipsJohn = {
            fullName: "John Smith",
            billsValues: [124, 48, 268, 180, 42],
            tipsLeft: [],
            totalMoney: [],
            calcTip: function () {
                for (var i = 0; i < this.billsValues.length; i++) {
                    if (this.billsValues[i] < 50) {
                        this.tipsLeft.push((this.billsValues[i] / 100) * 20); // здесь сноска, будет в конце задания
                    } else if (this.billsValues[i] >= 50 && this.billsValues[i] <= 200) {
                        this.tipsLeft.push((this.billsValues[i] / 100) * 15);
                    } else {
                        this.tipsLeft.push((this.billsValues[i] / 100) * 10);
                    }
                }
                for (var i = 0; i < this.tipsLeft.length; i++) {
                    this.totalMoney.push(this.tipsLeft[i] + this.billsValues[i]);
                }
            }
        }

        tipsJohn.calcTip();
        console.log("Чаевые, которые оставил Джон: " + tipsJohn.tipsLeft + "\nОбщие затраты Джона: " + tipsJohn.totalMoney);


        //Марк

        var tipsMark = {
            fullName: "Mark Gandolfi",
            billsValues: [77, 375, 110, 45],
            tipsLeft: [],
            totalMoney: [],
            calcTip: function () {
                for (var i = 0; i < this.billsValues.length; i++) {
                    if (this.billsValues[i] < 100) {
                        this.tipsLeft.push((this.billsValues[i] / 100) * 20);
                    } else if (this.billsValues[i] >= 100 && this.billsValues[i] <= 300) {
                        this.tipsLeft.push((this.billsValues[i] / 100) * 15);
                    } else {
                        this.tipsLeft.push((this.billsValues[i] / 100) * 25);
                    }
                }
                for (var i = 0; i < this.tipsLeft.length; i++) {
                    this.totalMoney.push(this.tipsLeft[i] + this.billsValues[i]);
                }
            }
        }

        tipsMark.calcTip();
        console.log("Чаевые, которые оставил Марк: " + tipsMark.tipsLeft + "\nОбщие затраты Марк: " + tipsMark.totalMoney);


        //сноска
        // this.tipsLeft.push((this.billsValues[i] / 100) * 20); По идее мы должны над значением (в данном случае [i(128)])
        // произвести уже готовый процент. То есть не делить его на 100, а потом умножать на 15, а 15 поделить на 100,
        // а потом умножить его на получившееся число.
        // Но в таком случае много знаком после запятой, но с точки зрения математики, должно быть именно так.
        // Я сделал так, чтоб остаток был по минимум, но понимаю, что математически - это не верно!!!


        // Сравнение Джона и Марка

        function averageTips(tips) {
            var sum = 0;
            for (var i = 0; i < tips.length; i++) {
                sum += tips[i];
            }
            return sum / (tips.length);
        }

        console.log("Семья Джона потратила: " + averageTips(tipsJohn.tipsLeft).toFixed(2)); // тут просто было 18.08000000002
        console.log("Семья Джона потратила: " + averageTips(tipsMark.tipsLeft).toFixed(2)); // а тут за компанию


        if (averageTips(tipsMark.tipsLeft).toFixed(2) > averageTips(tipsJohn.tipsLeft).toFixed(2)) {
            console.log("Марк с семьёй заплатили больше!");
        } else if (averageTips(tipsJohn.tipsLeft).toFixed(2) > averageTips(tipsMark.tipsLeft).toFixed(2)) {
            console.log("Джон с с семьёй заплатили больше!");
        } else {
            console.log("Джон и Марк платят одинаково!");
        }
    </script>
  </body>
</html>